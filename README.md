# JOSM-Russia-address-helper-plugin
Плагин JOSM для загрузки адресов из ЕГРН.

Плагин автоматически производит фильтрацию выделенных объектов, выбирая только полигоны с тегом [building](https://wiki.openstreetmap.org/wiki/RU:Key:building).

## Установка

1. Скопируйте файл [russia-address-helper.jar](https://github.com/De-Luxis/JOSM-Russia-address-helper-plugin/releases/latest/download/russia-address-helper.jar) в `%appdata%\JOSM\plugins` для Windows, и в `~/.local/share/JOSM/plugins` для Linux.
2. Включите плагин в `Правка - Настройки - Модули`. 

## Как пользоваться

1. Выделяем объекты, в числе которых есть здания
2. В меню `Данные - Russia address helper`

## Горячая клавиша

1. Добавьте кнопку на панель инструментов в  `Правка - Настройки - Панель инструментов`. 
2. Нажмите правой кнопкой по иконке плагина на панели инструментов и выберете `Свойства горячей клавиши`.

## Ограничения

1. Не выделяйте много домов, так как с каждым домом отправляется запрос. Сервис может не выдержать или заблокировать доступ из-за большого количества запросов. В идеале работать выделяя дома вдоль улицы, приводить данные в порядок и уже после этого приступать к следующим. 
2. Запросы отправляются только для тех домов, у которых нет номера и тега `fixme`.

## Примечания

* После того как привели значение [адресных тегов](https://wiki.openstreetmap.org/wiki/RU:Key:addr) в порядок, не забудьте удалить тег `fixme`. 
* Плагин на данный момент загружает данные только для улиц и переулков. Проспекты, шоссе и т.п. отбрасываются. 
* Для того чтоб принудительно загрузить и сохранить сырые данные, необходимо в настройках включить галочку "Записывать адрес из ЕГРН в `addr:RU:egrn`".

## TODO

- [x] Новый инструмент - пипетка. Создаёт точку с данными из ЕГРН в месте клика.
- [x] Локализация на русский. 
- [x] Отдельная галка в настройках для работы с дублями. Проверка существующих адресов и назначение адреса на самое большое по площади здание.
- [ ] Поддержка других типов улиц, такие как переулки, проспекты, шоссе и т.п.
- [ ] Возможность добавлять свои типы улиц в настройках.
- [ ] Возможность редактировать и добавлять пользовательские регулярные выражения для парсера адресов ЕГРН.
- [ ] Загрузка справочников типов улиц и регулярных выражений парсера через единый репозиторий. Избавит от необходимости обновления плагина и даст возможность другим людям дополнять парсер.
- [ ] Отдельный парсер для номеров домов. Должен приводить к [общепринятому виду](https://wiki.openstreetmap.org/wiki/RU:Addresses#%D0%9D%D1%83%D0%BC%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B4%D0%BE%D0%BC%D0%BE%D0%B2).
- [ ] Попытка повторной отправки ошибочных запросов установленное в настройках количество раз. Вывод уведомления о не загруженных данных.  
